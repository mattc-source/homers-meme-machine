/* ─── Simpsons palette ─────────────────────────────────── */
:root {
  --yellow:    #FED90F;
  --yellow-dk: #F2C400;
  --sky:       #6EC6E8;
  --sky-dk:    #4BAED4;
  --orange:    #F5A623;
  --orange-dk: #D4911A;
  --outline:   #1A1A1A;
  --white:     #FFFFFF;
  --off-white: #FAFAFA;
  --muted:     #5A7A8A;
}

/* ─── Reset ────────────────────────────────────────────── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

body {
  background: linear-gradient(180deg,
    #4A9DC5 0%,
    #70B9D8 30%,
    #96CDE0 60%,
    #B8DFF0 100%
  );
  background-attachment: fixed;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  min-height: 100vh;
  color: var(--outline);
  overflow-x: hidden;
}

/* ─── Ambient background clouds ────────────────────────── */
.bg-sky {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
}

.sky-cloud {
  position: absolute;
  background: white;
  border-radius: 50px;
  opacity: 0.55;
}
.sky-cloud::before,
.sky-cloud::after {
  content: '';
  position: absolute;
  background: white;
  border-radius: 50%;
}

.sc-1 {
  width: 180px; height: 55px;
  top: 8%; left: 4%;
  animation: float 22s ease-in-out infinite;
}
.sc-1::before { width: 70px; height: 70px; top: -35px; left: 28px; }
.sc-1::after  { width: 50px; height: 50px; top: -28px; left: 90px; }

.sc-2 {
  width: 130px; height: 42px;
  top: 18%; right: 8%;
  animation: float 28s ease-in-out infinite 5s;
}
.sc-2::before { width: 52px; height: 52px; top: -26px; left: 20px; }
.sc-2::after  { width: 38px; height: 38px; top: -20px; left: 68px; }

.sc-3 {
  width: 100px; height: 32px;
  top: 55%; left: 70%;
  animation: float 20s ease-in-out infinite 10s;
}
.sc-3::before { width: 40px; height: 40px; top: -20px; left: 14px; }
.sc-3::after  { width: 28px; height: 28px; top: -15px; left: 52px; }

.sc-4 {
  width: 150px; height: 46px;
  top: 72%; left: 12%;
  animation: float 26s ease-in-out infinite 3s;
}
.sc-4::before { width: 58px; height: 58px; top: -30px; left: 22px; }
.sc-4::after  { width: 42px; height: 42px; top: -22px; left: 80px; }

@keyframes float {
  0%, 100% { transform: translateX(0); }
  50%       { transform: translateX(30px); }
}

/* ─── Cloud mosaic curtain ──────────────────────────────── */
.curtain-clouds {
  position: fixed;
  inset: 0;
  z-index: 200;
  pointer-events: none;
}

/* Shared cloud piece styles */
.cc {
  position: absolute;
  background: white;
  animation-fill-mode: both;
  animation-timing-function: ease-in-out;
}

/* 8 scatter directions */
@keyframes cc-nw {
  0%   { opacity: 1; filter: blur(0px);   transform: translate(0,0)       scale(1);    }
  100% { opacity: 0; filter: blur(14px);  transform: translate(-20%,-18%) scale(1.18); }
}
@keyframes cc-n {
  0%   { opacity: 1; filter: blur(0px);   transform: translate(0,0)       scale(1);    }
  100% { opacity: 0; filter: blur(14px);  transform: translate(0,-22%)    scale(1.18); }
}
@keyframes cc-ne {
  0%   { opacity: 1; filter: blur(0px);   transform: translate(0,0)       scale(1);    }
  100% { opacity: 0; filter: blur(14px);  transform: translate(20%,-18%)  scale(1.18); }
}
@keyframes cc-w {
  0%   { opacity: 1; filter: blur(0px);   transform: translate(0,0)       scale(1);    }
  100% { opacity: 0; filter: blur(14px);  transform: translate(-25%,0)    scale(1.18); }
}
@keyframes cc-e {
  0%   { opacity: 1; filter: blur(0px);   transform: translate(0,0)       scale(1);    }
  100% { opacity: 0; filter: blur(14px);  transform: translate(25%,0)     scale(1.18); }
}
@keyframes cc-sw {
  0%   { opacity: 1; filter: blur(0px);   transform: translate(0,0)       scale(1);    }
  100% { opacity: 0; filter: blur(14px);  transform: translate(-20%,18%)  scale(1.18); }
}
@keyframes cc-s {
  0%   { opacity: 1; filter: blur(0px);   transform: translate(0,0)       scale(1);    }
  100% { opacity: 0; filter: blur(14px);  transform: translate(0,22%)     scale(1.18); }
}
@keyframes cc-se {
  0%   { opacity: 1; filter: blur(0px);   transform: translate(0,0)       scale(1);    }
  100% { opacity: 0; filter: blur(14px);  transform: translate(20%,18%)   scale(1.18); }
}

/* 3×3 grid — each overlaps neighbours so there are no gaps */
/* Top row */
.cc-1 {
  left: -5%; top: -10%; width: 50vw; height: 52vh;
  border-radius: 58% 42% 53% 47% / 52% 47% 53% 48%;
  animation: cc-nw 2.3s ease-in-out 0.25s forwards;
}
.cc-2 {
  left: 24%; top: -12%; width: 54vw; height: 50vh;
  border-radius: 44% 56% 48% 52% / 55% 42% 58% 45%;
  animation: cc-n  2.5s ease-in-out 0.15s forwards;
}
.cc-3 {
  right: -5%; top: -10%; width: 50vw; height: 52vh;
  border-radius: 47% 53% 44% 56% / 48% 54% 46% 52%;
  animation: cc-ne 2.2s ease-in-out 0.30s forwards;
}
/* Middle row */
.cc-4 {
  left: -5%; top: 26%; width: 46vw; height: 56vh;
  border-radius: 52% 48% 56% 44% / 46% 54% 48% 52%;
  animation: cc-w  2.4s ease-in-out 0.10s forwards;
}
.cc-5 {
  left: 18%; top: 20%; width: 64vw; height: 62vh;
  border-radius: 56% 44% 52% 48% / 44% 52% 48% 56%;
  animation: cc-n  2.7s ease-in-out 0.05s forwards;
}
.cc-6 {
  right: -5%; top: 26%; width: 46vw; height: 56vh;
  border-radius: 48% 52% 46% 54% / 54% 46% 52% 48%;
  animation: cc-e  2.4s ease-in-out 0.20s forwards;
}
/* Bottom row */
.cc-7 {
  left: -5%; bottom: -10%; width: 50vw; height: 52vh;
  border-radius: 46% 54% 52% 48% / 56% 44% 52% 48%;
  animation: cc-sw 2.3s ease-in-out 0.20s forwards;
}
.cc-8 {
  left: 24%; bottom: -12%; width: 54vw; height: 50vh;
  border-radius: 54% 46% 44% 56% / 48% 52% 46% 54%;
  animation: cc-s  2.6s ease-in-out 0.30s forwards;
}
.cc-9 {
  right: -5%; bottom: -10%; width: 50vw; height: 52vh;
  border-radius: 50% 50% 56% 44% / 44% 56% 48% 52%;
  animation: cc-se 2.2s ease-in-out 0.15s forwards;
}

/* ─── Hero ──────────────────────────────────────────────── */
.hero {
  position: relative;
  z-index: 10;
  text-align: center;
  padding: 4rem 1rem 2.5rem;
  opacity: 0;
  animation: hero-reveal 1.6s ease 1.1s both;
}

@keyframes hero-reveal {
  0%   { opacity: 0; filter: blur(6px); }
  60%  { filter: blur(0px); }
  100% { opacity: 1; filter: blur(0px); }
}

.logo {
  display: flex;
  flex-direction: column;
  align-items: center;
  line-height: 1;
  gap: 0;
}
.logo-homer {
  font-family: 'Bangers', cursive;
  font-size: clamp(2.8rem, 8vw, 6rem);
  color: var(--yellow);
  -webkit-text-stroke: 3px var(--outline);
  text-shadow: 4px 4px 0 var(--outline);
  letter-spacing: 3px;
}
.logo-meme {
  font-family: 'Permanent Marker', cursive;
  font-size: clamp(1.6rem, 5vw, 3.2rem);
  color: var(--white);
  -webkit-text-stroke: 1px var(--outline);
  text-shadow: 2px 2px 0 var(--outline);
  letter-spacing: 1px;
}

.tagline {
  margin-top: 0.8rem;
  font-size: clamp(0.85rem, 2.5vw, 1.1rem);
  color: var(--outline);
  opacity: 0.75;
  letter-spacing: 0.01em;
}

/* ─── Search ────────────────────────────────────────────── */
.search-section {
  max-width: 680px;
  margin: 1.75rem auto 0;
  padding: 0 1rem;
}

.input-wrap {
  display: flex;
  border: 4px solid var(--outline);
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 6px 6px 0 var(--outline);
  background: var(--white);
}

#searchInput {
  flex: 1;
  padding: 0.9rem 1.25rem;
  font-size: 1rem;
  font-family: 'Permanent Marker', cursive;
  border: none;
  outline: none;
  background: var(--white);
  color: var(--outline);
  min-width: 0;
}
#searchInput::placeholder { color: #999; }

#searchBtn {
  flex-shrink: 0;
  background: var(--yellow);
  color: var(--outline);
  border: none;
  border-left: 4px solid var(--outline);
  padding: 0.9rem 1.5rem;
  font-family: 'Bangers', cursive;
  font-size: 1.6rem;
  letter-spacing: 1px;
  cursor: pointer;
  transition: background 0.1s, transform 0.1s;
  white-space: nowrap;
}
#searchBtn:hover  { background: var(--yellow-dk); }
#searchBtn:active { transform: translate(2px, 2px); }

/* Example chips */
.example-chips {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 0.4rem;
  margin-top: 0.9rem;
  justify-content: center;
}
.chip-label { font-size: 0.75rem; opacity: 0.6; }
.chip {
  background: rgba(255,255,255,0.75);
  border: 2px solid var(--outline);
  border-radius: 20px;
  padding: 0.2rem 0.75rem;
  font-family: 'Permanent Marker', cursive;
  font-size: 0.75rem;
  cursor: pointer;
  box-shadow: 2px 2px 0 var(--outline);
  transition: transform 0.1s, box-shadow 0.1s, background 0.1s;
}
.chip:hover {
  transform: translate(-1px, -1px);
  box-shadow: 3px 3px 0 var(--outline);
  background: var(--yellow);
}

/* ─── Main / Results ────────────────────────────────────── */
main {
  position: relative;
  z-index: 10;
}

.loading {
  text-align: center;
  padding: 4rem 1rem;
  font-family: 'Bangers', cursive;
  font-size: 1.8rem;
  color: var(--outline);
  letter-spacing: 1px;
}
.donut {
  font-size: 4rem;
  display: block;
  margin: 0 auto 0.75rem;
  animation: spin 1.2s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

.results {
  max-width: 1100px;
  margin: 2rem auto 0;
  padding: 0 1.5rem;
}
.results-header {
  margin-bottom: 1rem;
  font-size: 0.85rem;
  opacity: 0.5;
  text-align: center;
}

.grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
  gap: 1.5rem;
}

/* ─── Floating meme cards ───────────────────────────────── */
@keyframes card-in {
  from { opacity: 0; transform: translateY(28px); }
  to   { opacity: 1; transform: translateY(0); }
}

.meme-card {
  cursor: pointer;
  border-radius: 16px;
  overflow: hidden;
  line-height: 0;
  opacity: 0;
  animation: card-in 0.55s ease forwards;
  transition: transform 0.2s, box-shadow 0.2s;
  box-shadow: 0 6px 24px rgba(0,0,0,0.18);
}
.meme-card:hover {
  transform: translateY(-6px) scale(1.02);
  box-shadow: 0 14px 32px rgba(0,0,0,0.38);
}
.meme-card img {
  width: 100%;
  height: auto;
  display: block;
  transition: opacity 0.3s;
}
.meme-card img.loading-img { opacity: 0.3; }

/* ─── No results / Error ────────────────────────────────── */
.no-results, .error {
  text-align: center;
  padding: 4rem 1rem;
  max-width: 500px;
  margin: 2rem auto;
}
.doh-wrap { margin-bottom: 0.5rem; }
.doh {
  font-family: 'Bangers', cursive;
  font-size: clamp(3.5rem, 10vw, 6rem);
  color: var(--orange);
  -webkit-text-stroke: 3px var(--outline);
  text-shadow: 4px 4px 0 var(--outline);
}
.no-results p, .error p { font-size: 1rem; line-height: 1.6; opacity: 0.8; }

/* ─── Lightbox ──────────────────────────────────────────── */
.lightbox {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.88);
  z-index: 500;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 2rem 1.5rem;
  cursor: pointer;
}
.lightbox-inner {
  position: relative;
  max-width: 860px;
  width: 100%;
  cursor: default;
  animation: lb-in 0.18s ease;
}
@keyframes lb-in {
  from { transform: scale(0.94); opacity: 0; }
  to   { transform: scale(1);    opacity: 1; }
}
.lightbox-img {
  width: 100%;
  display: block;
  border-radius: 16px 16px 0 0;
}
.lightbox-bar {
  background: var(--yellow);
  border: 3px solid var(--outline);
  border-top: none;
  border-radius: 0 0 16px 16px;
  padding: 0.6rem 0.9rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1rem;
}
.lightbox-meta {
  display: flex;
  flex-direction: column;
  gap: 0.1rem;
  min-width: 0;
}
.lb-episode {
  font-family: 'Bangers', cursive;
  font-size: 1rem;
  letter-spacing: 1px;
}
.lb-title {
  font-size: 0.75rem;
  opacity: 0.7;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.lb-copy {
  flex-shrink: 0;
  background: var(--yellow);
  color: var(--outline);
  border: 3px solid var(--outline);
  border-radius: 6px;
  padding: 0.4rem 1rem;
  font-family: 'Bangers', cursive;
  font-size: 1rem;
  letter-spacing: 1px;
  cursor: pointer;
  transition: background 0.1s;
  box-shadow: 3px 3px 0 var(--outline);
}
.lb-copy:hover { background: var(--yellow-dk); }
.lightbox-close {
  position: absolute;
  top: -1rem;
  right: -1rem;
  background: var(--yellow);
  color: var(--outline);
  border: 3px solid var(--outline);
  border-radius: 50%;
  width: 2.2rem;
  height: 2.2rem;
  font-family: 'Bangers', cursive;
  font-size: 1rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 2px 2px 0 var(--outline);
  transition: background 0.1s;
  z-index: 1;
}
.lightbox-close:hover { background: var(--yellow-dk); }

/* ─── Footer ────────────────────────────────────────────── */
footer {
  position: relative;
  z-index: 10;
  text-align: center;
  padding: 2rem 1rem;
  margin-top: 4rem;
  font-size: 0.8rem;
  opacity: 0.55;
}
footer a { color: var(--outline); }

/* ─── Toast ─────────────────────────────────────────────── */
.toast {
  position: fixed;
  bottom: 1.5rem;
  left: 50%;
  transform: translateX(-50%) translateY(10px);
  background: var(--outline);
  color: var(--yellow);
  font-family: 'Bangers', cursive;
  font-size: 1.1rem;
  letter-spacing: 1px;
  padding: 0.6rem 1.4rem;
  border-radius: 6px;
  opacity: 0;
  transition: opacity 0.2s, transform 0.2s;
  pointer-events: none;
  z-index: 600;
}
.toast.show {
  opacity: 1;
  transform: translateX(-50%) translateY(0);
}

/* ─── Utility ───────────────────────────────────────────── */
.hidden { display: none !important; }

/* ─── Responsive ────────────────────────────────────────── */
@media (max-width: 860px) {
  .grid { grid-template-columns: 1fr; }
  #searchBtn { padding: 0.9rem 1rem; font-size: 1.3rem; }
  .example-chips { display: none; }
}
